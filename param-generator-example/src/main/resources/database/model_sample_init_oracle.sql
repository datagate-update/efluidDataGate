-- Script de préparation de BDD démo pour le sample de génération - ORACLE 12c

DROP TABLE "TMATERIEL";
DROP TABLE "TCOMPTEUR";
DROP TABLE "TOTHER";
DROP TABLE "TTYPECOMPTEURS";
DROP TABLE "TCATEGORY";


-- For fr.uem.efluid.sample.CategorieDeMateriel
CREATE TABLE "TCATEGORY" 
(
	"ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
	"NAME" VARCHAR2(256 BYTE) NOT NULL, 
	"CODE" VARCHAR2(256 BYTE) NOT NULL,
	CONSTRAINT "TCATEGORY_PK" PRIMARY KEY ("ID") USING INDEX ENABLE
) TABLESPACE "USERS" ;

INSERT INTO "TCATEGORY"("NAME", "CODE") VALUES ('Compteur', 'Type de compteur standard');
INSERT INTO "TCATEGORY"("NAME", "CODE") VALUES ('Pylone', 'Gros pylone HT');
INSERT INTO "TCATEGORY"("NAME", "CODE") VALUES ('Box', 'Catégorie de box');
INSERT INTO "TCATEGORY"("NAME", "CODE") VALUES ('Antenne', 'Catégorie pour les antennes');
INSERT INTO "TCATEGORY"("NAME", "CODE") VALUES ('Centrale', 'Centrale électrique');
INSERT INTO "TCATEGORY"("NAME", "CODE") VALUES ('Raccord', 'Raccordement');


-- For fr.uem.efluid.sample.Materiel
CREATE TABLE "TMATERIEL"
(
    "ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "DETAILS" VARCHAR2(256 BYTE),
    "SERIAL" VARCHAR2(256 BYTE) NOT NULL,
    "CAT_ID" NUMBER NOT NULL,
    CONSTRAINT "TMATERIEL_PK" PRIMARY KEY ("ID") USING INDEX ENABLE,
    CONSTRAINT "TMATERIEL_CAT" FOREIGN KEY ("CAT_ID") REFERENCES "TCATEGORY" ("ID") 
) TABLESPACE "USERS" ;

INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Compteur lynki vert', 'L009887321', 1);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Compteur schneider blanc', 'SCH09887131', 1);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Compteur chinois chipou', 'HK-0001', 1);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Parc éolien', '099922', 5);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Central à charbon autrichienne', '0CHARBO', 5);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Freebox', 'FREE001', 3);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Livebox', 'ORANGE001', 3);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Compteur lynki bleu', 'L009887381', 1);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Compteur schneider mauve', 'SCH0988221', 1);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Ancien MGE', 'MGE5566', 1);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Central au fioul', '099555', 5);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Central nucléaire', 'ALSTOM001', 5);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('SagemCom', 'SSDD001', 3);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('BBox', 'BBB001', 3);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Antenne droite', '011', 4);
INSERT INTO "TMATERIEL"("DETAILS", "SERIAL", "CAT_ID") VALUES ('Pylone A', 'AAAP', 2);


-- For fr.uem.efluid.sample.TypeDeCompteur
CREATE TABLE "TTYPECOMPTEURS"
(
    "ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "DESIGNATION" VARCHAR2(256 BYTE) NOT NULL,
    "VARIANTE" VARCHAR2(256 BYTE) NOT NULL,
    CONSTRAINT "TTYPECOMPTEURS_PK" PRIMARY KEY ("ID")
) TABLESPACE "USERS" ;

INSERT INTO "TTYPECOMPTEURS"("DESIGNATION", "VARIANTE") VALUES ('Compteur linky jaune', 'Jaune');
INSERT INTO "TTYPECOMPTEURS"("DESIGNATION", "VARIANTE") VALUES ('Compteur linky bleu', 'Bleu');


-- For fr.uem.efluid.sample.Compteur
CREATE TABLE "TCOMPTEUR"
(
    "ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "SERIAL" VARCHAR2(256 BYTE) NOT NULL,
    "NOM" VARCHAR2(256 BYTE) NOT NULL,
    "DETAILS" VARCHAR2(256 BYTE),
    "CAT_ID" NUMBER NOT NULL,
    "FABRIQUANT" VARCHAR2(256 BYTE) NOT NULL,
    "ACTIF" SMALLINT NOT NULL,
    "TYPE_ID" NUMBER NOT NULL,
    CONSTRAINT "TCOMPTEUR_PK" PRIMARY KEY ("ID") USING INDEX ENABLE,
    CONSTRAINT "TCOMPTEUR_CAT" FOREIGN KEY ("CAT_ID") REFERENCES "TCATEGORY" ("ID"),
    CONSTRAINT "TCOMPTEUR_TYPE" FOREIGN KEY ("TYPE_ID") REFERENCES "TTYPECOMPTEURS" ("ID") 
) TABLESPACE "USERS" ;

INSERT INTO "TCOMPTEUR"("DETAILS", "SERIAL", "NOM", "CAT_ID", "FABRIQUANT", "ACTIF", "TYPE_ID" ) VALUES ('Compteur lynki jaune AAAA', 'L00AAAA', 'L00AAAA', 1, 'Shneider', 1 ,1);
INSERT INTO "TCOMPTEUR"("DETAILS", "SERIAL", "NOM", "CAT_ID", "FABRIQUANT", "ACTIF", "TYPE_ID" ) VALUES ('Compteur lynki jaune BBBB', 'L00BBBB', 'L00BBBB', 1, 'Shneider', 1 ,1);
INSERT INTO "TCOMPTEUR"("DETAILS", "SERIAL", "NOM", "CAT_ID", "FABRIQUANT", "ACTIF", "TYPE_ID" ) VALUES ('Compteur lynki jaune CCCC', 'L00CCCC', 'L00CCCC', 1, 'Shneider', 1 ,1);
INSERT INTO "TCOMPTEUR"("DETAILS", "SERIAL", "NOM", "CAT_ID", "FABRIQUANT", "ACTIF", "TYPE_ID" ) VALUES ('Compteur lynki jaune Desactivé', 'L00DDDD','L00DDDD', 2, 'Shneider', 0 ,1);
INSERT INTO "TCOMPTEUR"("DETAILS", "SERIAL", "NOM", "CAT_ID", "FABRIQUANT", "ACTIF", "TYPE_ID" ) VALUES ('Compteur lynki bleu EEEE', 'L00DDDD', 'L00DDDD', 2, 'Shneider', 1 ,2);
INSERT INTO "TCOMPTEUR"("DETAILS", "SERIAL", "NOM", "CAT_ID", "FABRIQUANT", "ACTIF", "TYPE_ID" ) VALUES ('Compteur lynki bleu FFFF', 'L00FFFF', 'L00FFFF', 2, 'Shneider', 1 ,2);
INSERT INTO "TCOMPTEUR"("DETAILS", "SERIAL", "NOM", "CAT_ID", "FABRIQUANT", "ACTIF", "TYPE_ID" ) VALUES ('Compteur lynki jaune GGGG', 'L00GGGG', 'L00GGGG', 2, 'Shneider', 1 ,1);


-- For fr.uem.efluid.sample.other.AutreItem
CREATE TABLE "TOTHER"
(
    "ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "CODE" VARCHAR2(256 BYTE) NOT NULL,
    "VALUE" FLOAT,
    "WHEN" TIMESTAMP,
    "BFILE" BLOB,
    CONSTRAINT "TOTHER_PK" PRIMARY KEY ("ID")
) TABLESPACE "USERS" ;

INSERT INTO "TOTHER"("CODE", "VALUE", "WHEN", "BFILE") VALUES ('ABB0001', 3.2345, '02-01-2018 23:42:32', '0123456789ABCDEF0123456789ABCDEF1');
INSERT INTO "TOTHER"("CODE", "VALUE", "WHEN", "BFILE") VALUES ('ABB0002', 33.225, '02-01-2018 23:42:32', '0123456789ABCDEF0123456789ABCDEF2');
INSERT INTO "TOTHER"("CODE", "VALUE", "WHEN", "BFILE") VALUES ('ABB0003', 3.2335, '02-01-2018 23:42:32', '0123456789ABCDEF0123456789ABCDEF3');


EXEC DBMS_STATS.gather_schema_stats('DEMO', cascade=>TRUE);