-- Init de tables pour l'utilisation de mappings

DROP TABLE "T_REFERER_WITH_NAT_COMPO";
DROP TABLE "T_REFERER_WITH_BIZ_COMPO";
DROP TABLE "T_WITH_NAT_COMPO";
DROP TABLE "T_WITH_BIZ_COMPO";


CREATE TABLE "T_WITH_NAT_COMPO" (
	"ID_ONE" NUMBER(19,0) NOT NULL,
	"ID_TWO" NUMBER(19,0) NOT NULL,
	"VALUE" VARCHAR2(256 BYTE) NOT NULL, 
	"DETAILS" VARCHAR2(256 BYTE) NOT NULL, 
	CONSTRAINT "T_WITH_NAT_COMPO_PK" PRIMARY KEY ("ID_ONE", "ID_TWO") USING INDEX ENABLE
) TABLESPACE "USERS" ;


CREATE TABLE "T_WITH_BIZ_COMPO" (
	"ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
	"BIZ_KEY_ONE" NUMBER(19,0) NOT NULL,
	"BIZ_KEY_TWO" NUMBER(19,0) NOT NULL,
	"BIZ_KEY_THREE" NUMBER(19,0) NOT NULL,
	"VALUE" VARCHAR2(256 BYTE) NOT NULL, 
	"DETAILS" VARCHAR2(256 BYTE) NOT NULL, 
	CONSTRAINT "T_WITH_BIZ_COMPO_PK" PRIMARY KEY ("ID") USING INDEX ENABLE
) TABLESPACE "USERS" ;


CREATE TABLE "T_REFERER_WITH_NAT_COMPO" (
	"ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
	"REF_KEY_ONE" NUMBER(19,0) NOT NULL,
	"COMP_ID_ONE" NUMBER(19,0) NOT NULL,
	"COMP_ID_TWO" NUMBER(19,0) NOT NULL,
	"REF_VALUE" VARCHAR2(256 BYTE) NOT NULL, 
	"REF_DETAILS" VARCHAR2(256 BYTE) NOT NULL, 
	CONSTRAINT "T_REF_WITH_NAT_COMPO_PK" PRIMARY KEY ("ID") USING INDEX ENABLE,
	CONSTRAINT "T_COMP_NAT_ID_ONE" FOREIGN KEY ("COMP_ID_ONE", "COMP_ID_TWO") REFERENCES "T_WITH_NAT_COMPO" ("ID_ONE", "ID_TWO")
) TABLESPACE "USERS" ;


CREATE TABLE "T_REFERER_WITH_BIZ_COMPO" (
	"ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
	"REF_KEY_ONE" NUMBER(19,0) NOT NULL,
	"COMP_BIZ_KEY_ONE" NUMBER(19,0) NOT NULL,
	"COMP_BIZ_KEY_TWO" NUMBER(19,0) NOT NULL,
	"COMP_BIZ_KEY_THREE" NUMBER(19,0) NOT NULL,
	"REF_VALUE" VARCHAR2(256 BYTE) NOT NULL, 
	"REF_DETAILS" VARCHAR2(256 BYTE) NOT NULL, 
	CONSTRAINT "T_REF_WITH_BIZ_COMPO_PK" PRIMARY KEY ("ID") USING INDEX ENABLE
) TABLESPACE "USERS" ;


-- Pour l'instant des données très simples.

INSERT INTO "T_WITH_NAT_COMPO"("ID_ONE", "ID_TWO", "VALUE", "DETAILS") VALUES (1, 1, 'CompoNat0001', 'Some details For Compo 111');
INSERT INTO "T_WITH_NAT_COMPO"("ID_ONE", "ID_TWO", "VALUE", "DETAILS") VALUES (1, 2, 'CompoNat0002', 'Some details For Compo 222');
INSERT INTO "T_WITH_NAT_COMPO"("ID_ONE", "ID_TWO", "VALUE", "DETAILS") VALUES (1, 3, 'CompoNat0003', 'Some details For Compo 333');
INSERT INTO "T_WITH_NAT_COMPO"("ID_ONE", "ID_TWO", "VALUE", "DETAILS") VALUES (1, 4, 'CompoNat0004', 'Some details For Compo 444');
INSERT INTO "T_WITH_NAT_COMPO"("ID_ONE", "ID_TWO", "VALUE", "DETAILS") VALUES (2, 1, 'CompoNat0005', 'Some details For Compo 555');
INSERT INTO "T_WITH_NAT_COMPO"("ID_ONE", "ID_TWO", "VALUE", "DETAILS") VALUES (2, 2, 'CompoNat0006', 'Some details For Compo 666');
INSERT INTO "T_WITH_NAT_COMPO"("ID_ONE", "ID_TWO", "VALUE", "DETAILS") VALUES (2, 3, 'CompoNat0007', 'Some details For Compo 777');
INSERT INTO "T_WITH_NAT_COMPO"("ID_ONE", "ID_TWO", "VALUE", "DETAILS") VALUES (2, 4, 'CompoNat0008', 'Some details For Compo 888');

INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1111, 1111, 1111, 'CompoBizTwo0001', 'Some details Two Also Biz 1111');
INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1111, 1211, 1211, 'CompoBizTwo0002', 'Some details Two Also Biz 2222');
INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1311, 1311, 1311, 'CompoBizTwo0003', 'Some details Two Also Biz 3333');
INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1111, 1411, 1411, 'CompoBizTwo0004', 'Some details Two Also Biz 4444');
INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1511, 1511, 1511, 'CompoBizTwo0005', 'Some details Two Also Biz 5555');
INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1611, 1211, 1611, 'CompoBizTwo0006', 'Some details Two Also Biz 6666');
INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1711, 1711, 1311, 'CompoBizTwo0007', 'Some details Two Also Biz 7777');
INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1811, 1211, 1311, 'CompoBizTwo0008', 'Some details Two Also Biz 8888');
INSERT INTO "T_WITH_BIZ_COMPO"("BIZ_KEY_ONE", "BIZ_KEY_TWO", "BIZ_KEY_THREE", "VALUE", "DETAILS") VALUES (1911, 1911, 1911, 'CompoBizTwo0009', 'Some details Two Also Biz 9999');

INSERT INTO "T_REFERER_WITH_NAT_COMPO"("REF_KEY_ONE", "COMP_ID_ONE", "COMP_ID_TWO", "REF_VALUE", "REF_DETAILS") VALUES (1, 1, 2, 'RefNatElement 0001', 'Some details Referer Element - 1111 -');
INSERT INTO "T_REFERER_WITH_NAT_COMPO"("REF_KEY_ONE", "COMP_ID_ONE", "COMP_ID_TWO", "REF_VALUE", "REF_DETAILS") VALUES (2, 1, 3, 'RefNatElement 0002', 'Some details Referer Element - 2222 -');
INSERT INTO "T_REFERER_WITH_NAT_COMPO"("REF_KEY_ONE", "COMP_ID_ONE", "COMP_ID_TWO", "REF_VALUE", "REF_DETAILS") VALUES (3, 1, 4, 'RefNatElement 0003', 'Some details Referer Element - 3333 -');
INSERT INTO "T_REFERER_WITH_NAT_COMPO"("REF_KEY_ONE", "COMP_ID_ONE", "COMP_ID_TWO", "REF_VALUE", "REF_DETAILS") VALUES (4, 2, 1, 'RefNatElement 0004', 'Some details Referer Element - 4444 -');
INSERT INTO "T_REFERER_WITH_NAT_COMPO"("REF_KEY_ONE", "COMP_ID_ONE", "COMP_ID_TWO", "REF_VALUE", "REF_DETAILS") VALUES (5, 2, 2, 'RefNatElement 0005', 'Some details Referer Element - 5555 -');
INSERT INTO "T_REFERER_WITH_NAT_COMPO"("REF_KEY_ONE", "COMP_ID_ONE", "COMP_ID_TWO", "REF_VALUE", "REF_DETAILS") VALUES (6, 1, 2, 'RefNatElement 0006', 'Some details Referer Element - 6666 -');

INSERT INTO "T_REFERER_WITH_BIZ_COMPO"("REF_KEY_ONE", "COMP_BIZ_KEY_ONE", "COMP_BIZ_KEY_TWO", "COMP_BIZ_KEY_THREE", "REF_VALUE", "REF_DETAILS") VALUES (1, 1111, 1211, 1211, 'RefBizElement 0001', 'Some details Referer Element - 1111 -');
INSERT INTO "T_REFERER_WITH_BIZ_COMPO"("REF_KEY_ONE", "COMP_BIZ_KEY_ONE", "COMP_BIZ_KEY_TWO", "COMP_BIZ_KEY_THREE", "REF_VALUE", "REF_DETAILS") VALUES (2, 1311, 1311, 1311, 'RefBizElement 0002', 'Some details Referer Element - 2222 -');
INSERT INTO "T_REFERER_WITH_BIZ_COMPO"("REF_KEY_ONE", "COMP_BIZ_KEY_ONE", "COMP_BIZ_KEY_TWO", "COMP_BIZ_KEY_THREE", "REF_VALUE", "REF_DETAILS") VALUES (3, 1111, 1411, 1411, 'RefBizElement 0003', 'Some details Referer Element - 3333 -');
INSERT INTO "T_REFERER_WITH_BIZ_COMPO"("REF_KEY_ONE", "COMP_BIZ_KEY_ONE", "COMP_BIZ_KEY_TWO", "COMP_BIZ_KEY_THREE", "REF_VALUE", "REF_DETAILS") VALUES (4, 1511, 1511, 1511, 'RefBizElement 0004', 'Some details Referer Element - 4444 -');
INSERT INTO "T_REFERER_WITH_BIZ_COMPO"("REF_KEY_ONE", "COMP_BIZ_KEY_ONE", "COMP_BIZ_KEY_TWO", "COMP_BIZ_KEY_THREE", "REF_VALUE", "REF_DETAILS") VALUES (5, 1611, 1211, 1611, 'RefBizElement 0005', 'Some details Referer Element - 5555 -');
INSERT INTO "T_REFERER_WITH_BIZ_COMPO"("REF_KEY_ONE", "COMP_BIZ_KEY_ONE", "COMP_BIZ_KEY_TWO", "COMP_BIZ_KEY_THREE", "REF_VALUE", "REF_DETAILS") VALUES (6, 1711, 1711, 1311, 'RefBizElement 0006', 'Some details Referer Element - 6666 -');


EXEC DBMS_STATS.gather_schema_stats('REFERENCE', cascade=>TRUE);