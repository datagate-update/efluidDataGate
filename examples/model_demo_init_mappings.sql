-- Init de tables pour l'utilisation de mappings

DROP TABLE "TM_USR_DEST_ONE";
DROP TABLE "TM_USR_DEST_TWO";

DROP TABLE "TMAPPING_USER_ONE";
DROP TABLE "TMAPPING_DEST_ONE";
DROP TABLE "TMAP_SUB_ITEM";

DROP TABLE "TMAPPING_USER_TWO";
DROP TABLE "TMAPPING_DEST_TWO";



CREATE TABLE "TMAPPING_USER_ONE" (
	"ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
	"NAME" VARCHAR2(256 BYTE) NOT NULL, 
	"DETAILS" VARCHAR2(256 BYTE) NOT NULL, 
	CONSTRAINT "TMAPPING_USER_ONE_PK" PRIMARY KEY ("ID") USING INDEX ENABLE
) TABLESPACE "USERS" ;

CREATE TABLE "TMAPPING_USER_TWO" (
	"ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
	"BIZ_KEY" NUMBER(19,0) NOT NULL,
	"VALUE" VARCHAR2(256 BYTE) NOT NULL, 
	"DETAILS" VARCHAR2(256 BYTE) NOT NULL, 
	CONSTRAINT "TMAPPING_USER_TWO_PK" PRIMARY KEY ("ID") USING INDEX ENABLE
) TABLESPACE "USERS" ;


CREATE TABLE "TMAP_SUB_ITEM" (
	"ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
	"ELEMENT_CODE" NUMBER(19,0) NOT NULL,
	"ELEMENT_VALUE" VARCHAR2(256 BYTE) NOT NULL, 
	"DETAILS" VARCHAR2(256 BYTE) NOT NULL, 
	CONSTRAINT "TMAP_SUB_ITEM_PK" PRIMARY KEY ("ID") USING INDEX ENABLE
) TABLESPACE "USERS" ;

CREATE TABLE "TMAPPING_DEST_ONE" (
    "ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "CODE" VARCHAR2(256 BYTE) NOT NULL,
    "TYPE" VARCHAR2(256 BYTE),
    "SUBITEM_ID" NUMBER NOT NULL,
    CONSTRAINT "TMAPPING_DEST_ONE_PK" PRIMARY KEY ("ID") USING INDEX ENABLE,
    CONSTRAINT "TMAPPING_DEST_ONE_SUBITEM_ID" FOREIGN KEY ("SUBITEM_ID") REFERENCES "TMAP_SUB_ITEM" ("ID") 
) TABLESPACE "USERS" ;

CREATE TABLE "TMAPPING_DEST_TWO" (
    "ID" NUMBER(19,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
    "NAME" VARCHAR2(256 BYTE),
    CONSTRAINT "TMAPPING_DEST_TWO_PK" PRIMARY KEY ("ID") USING INDEX ENABLE
) TABLESPACE "USERS" ;

CREATE TABLE "TM_USR_DEST_ONE" (
	"USR_ID" NUMBER(19,0) NOT NULL,
	"DEST_ID" NUMBER(19,0) NOT NULL,
	CONSTRAINT "TM_USR_DEST_ONE" PRIMARY KEY ("USR_ID", "DEST_ID") USING INDEX ENABLE,
    CONSTRAINT "TM_USR_DEST_ONE_USR_ID" FOREIGN KEY ("USR_ID") REFERENCES "TMAPPING_USER_ONE" ("ID") ,
    CONSTRAINT "TM_USR_DEST_ONE_DEST_ID" FOREIGN KEY ("DEST_ID") REFERENCES "TMAPPING_DEST_ONE" ("ID") 
) TABLESPACE "USERS" ;

CREATE TABLE "TM_USR_DEST_TWO" (
	"USR_BIZ_KEY" NUMBER(19,0) NOT NULL,
	"DEST_ID" NUMBER(19,0) NOT NULL,
	CONSTRAINT "TM_USR_DEST_TWO_PK" PRIMARY KEY ("USR_BIZ_KEY", "DEST_ID") USING INDEX ENABLE,
    CONSTRAINT "TM_USR_DEST_TWO_DEST_ID" FOREIGN KEY ("DEST_ID") REFERENCES "TMAPPING_DEST_TWO" ("ID") 
) TABLESPACE "USERS" ;



-- Pour l'instant des données très simples.

INSERT INTO "TMAPPING_USER_ONE"("NAME", "DETAILS") VALUES ('User0001', 'Some details 111');
INSERT INTO "TMAPPING_USER_ONE"("NAME", "DETAILS") VALUES ('User0002', 'Some details 222');
INSERT INTO "TMAPPING_USER_ONE"("NAME", "DETAILS") VALUES ('User0003', 'Some details 333');
INSERT INTO "TMAPPING_USER_ONE"("NAME", "DETAILS") VALUES ('User0004', 'Some details 444');
INSERT INTO "TMAPPING_USER_ONE"("NAME", "DETAILS") VALUES ('User0005', 'Some details 555');
INSERT INTO "TMAPPING_USER_ONE"("NAME", "DETAILS") VALUES ('User0006', 'Some details 666');
INSERT INTO "TMAPPING_USER_ONE"("NAME", "DETAILS") VALUES ('User0007', 'Some details 777');
INSERT INTO "TMAPPING_USER_ONE"("NAME", "DETAILS") VALUES ('User0008', 'Some details 888');

INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1111, 'UserTwo0001', 'Some details Two 1111');
INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1211, 'UserTwo0002', 'Some details Two 2222');
INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1311, 'UserTwo0003', 'Some details Two 3333');
INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1411, 'UserTwo0004', 'Some details Two 4444');
INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1511, 'UserTwo0005', 'Some details Two 5555');
INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1611, 'UserTwo0006', 'Some details Two 6666');
INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1711, 'UserTwo0007', 'Some details Two 7777');
INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1811, 'UserTwo0008', 'Some details Two 8888');
INSERT INTO "TMAPPING_USER_TWO"("BIZ_KEY", "VALUE", "DETAILS") VALUES (1911, 'UserTwo0009', 'Some details Two 9999');

INSERT INTO "TMAP_SUB_ITEM"("ELEMENT_CODE", "ELEMENT_VALUE", "DETAILS") VALUES (1, 'Element 0001', 'Some details Element sub - 1111 -');
INSERT INTO "TMAP_SUB_ITEM"("ELEMENT_CODE", "ELEMENT_VALUE", "DETAILS") VALUES (2, 'Element 0002', 'Some details Element sub - 2222 -');
INSERT INTO "TMAP_SUB_ITEM"("ELEMENT_CODE", "ELEMENT_VALUE", "DETAILS") VALUES (3, 'Element 0003', 'Some details Element sub - 3333 -');
INSERT INTO "TMAP_SUB_ITEM"("ELEMENT_CODE", "ELEMENT_VALUE", "DETAILS") VALUES (4, 'Element 0004', 'Some details Element sub - 4444 -');
INSERT INTO "TMAP_SUB_ITEM"("ELEMENT_CODE", "ELEMENT_VALUE", "DETAILS") VALUES (5, 'Element 0005', 'Some details Element sub - 5555 -');
INSERT INTO "TMAP_SUB_ITEM"("ELEMENT_CODE", "ELEMENT_VALUE", "DETAILS") VALUES (6, 'Element 0006', 'Some details Element sub - 6666 -');

INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('A', 'A basic destination A', 1);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('B', 'A basic destination B', 1);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('C', 'A basic destination C', 2);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('D', 'A basic destination D', 2);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('E', 'A basic destination E', 3);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('F', 'A basic destination F', 4);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('G', 'A basic destination G', 4);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('H', 'A basic destination H', 5);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('I', 'A basic destination I', 6);
INSERT INTO "TMAPPING_DEST_ONE"("CODE", "TYPE", "SUBITEM_ID") VALUES ('J', 'A basic destination J', 1);

INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 001');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 002');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 003');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 004');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 005');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 006');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 007');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 008');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 009');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 010');
INSERT INTO "TMAPPING_DEST_TWO"("NAME") VALUES ('Mapping Dest Two 011');

INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (1, 1);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (1, 2);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (1, 3);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (1, 4);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (1, 5);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (2, 3);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (2, 6);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (3, 1);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (4, 1);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (2, 8);
INSERT INTO "TM_USR_DEST_ONE"("USR_ID", "DEST_ID") VALUES (1, 6);

INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1111, 1);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1211, 1);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1311, 1);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1411, 2);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1511, 3);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1611, 4);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1711, 5);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1811, 6);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1911, 7);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1111, 7);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1211, 7);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1311, 3);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1411, 4);
INSERT INTO "TM_USR_DEST_TWO"("USR_BIZ_KEY", "DEST_ID") VALUES (1511, 2);


EXEC DBMS_STATS.gather_schema_stats('REFERENCE', cascade=>TRUE);